<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–í–∏–¥–µ–æ –Ω–∞ —Ñ–æ–Ω–µ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
            position: fixed;
        }
        
        #video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
        }
        
        video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
            object-fit: cover;
        }
        
        #tap-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            font-family: Arial, sans-serif;
        }
        
        #tap-overlay.hidden {
            display: none;
        }
        
        .tap-message {
            color: #fff;
            font-size: 20px;
            padding: 30px 40px;
            background: rgba(0, 255, 0, 0.2);
            border: 3px solid #00ff00;
            border-radius: 15px;
            user-select: none;
            text-align: center;
        }
        
        .tap-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .status {
            margin-top: 20px;
            font-size: 14px;
            color: #aaa;
        }
        
        .error {
            color: #ff4444;
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 68, 68, 0.1);
            border: 2px solid #ff4444;
            border-radius: 10px;
            max-width: 90%;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="tap-overlay">
        <div class="tap-icon">‚ñ∂Ô∏è</div>
        <div class="tap-message" id="message">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞</div>
        <div class="status" id="status"></div>
    </div>

    <div id="video-container">
        <video 
            id="bg-video"
            muted
            playsinline
            webkit-playsinline
            loop
            preload="metadata"
        >
            <source src="background.mp4" type="video/mp4">
        </video>
    </div>

    <script>
        const video = document.getElementById('bg-video');
        const overlay = document.getElementById('tap-overlay');
        const message = document.getElementById('message');
        const status = document.getElementById('status');
        
        let clicked = false;
        
        function updateStatus(text, isError = false) {
            console.log(text);
            status.textContent = text;
            if (isError) {
                status.className = 'error';
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –≤–∏–¥–µ–æ
        function checkVideo() {
            const src = video.querySelector('source').src;
            updateStatus(`–ü—É—Ç—å: ${src}`);
            
            console.log('üìπ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∏–¥–µ–æ:');
            console.log('- –ü—É—Ç—å:', src);
            console.log('- ReadyState:', video.readyState);
            console.log('- NetworkState:', video.networkState);
            console.log('- Error:', video.error);
            
            if (video.error) {
                let errorText = '–û—à–∏–±–∫–∞ –≤–∏–¥–µ–æ: ';
                switch(video.error.code) {
                    case 1: errorText += '–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞'; break;
                    case 2: errorText += '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª!'; break;
                    case 3: errorText += '–û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è'; break;
                    case 4: errorText += '–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è'; break;
                }
                updateStatus(errorText, true);
                message.textContent = '–í–∏–¥–µ–æ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å';
            }
        }
        
        // –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –∑–∞–ø—É—Å–∫ –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
        function startVideo(e) {
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            if (clicked) return;
            clicked = true;
            
            updateStatus('–ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞...');
            console.log('üëÜ –ö–ª–∏–∫, –∑–∞–ø—É—Å–∫ –≤–∏–¥–µ–æ');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
            checkVideo();
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            video.muted = true;
            video.volume = 0;
            
            // –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫
            video.play()
                .then(() => {
                    console.log('‚úÖ –í–∏–¥–µ–æ –∑–∞–ø—É—â–µ–Ω–æ!');
                    updateStatus('–í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è ‚úì');
                    
                    setTimeout(() => {
                        overlay.classList.add('hidden');
                    }, 500);
                })
                .catch(error => {
                    console.error('‚ùå –û—à–∏–±–∫–∞ play():', error);
                    updateStatus(`–û—à–∏–±–∫–∞: ${error.message}`, true);
                    message.textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å';
                    clicked = false;
                });
        }
        
        // –°–æ–±—ã—Ç–∏—è –≤–∏–¥–µ–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        video.addEventListener('loadstart', () => {
            console.log('üì• loadstart - –Ω–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏');
            updateStatus('–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞—Ç–∞...');
        });
        
        video.addEventListener('loadedmetadata', () => {
            console.log('‚úÖ loadedmetadata');
            console.log('- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:', video.duration);
            console.log('- –†–∞–∑–º–µ—Ä:', video.videoWidth + 'x' + video.videoHeight);
            updateStatus(`–í–∏–¥–µ–æ: ${Math.round(video.duration)}—Å–µ–∫, ${video.videoWidth}x${video.videoHeight}`);
        });
        
        video.addEventListener('loadeddata', () => {
            console.log('‚úÖ loadeddata');
        });
        
        video.addEventListener('canplay', () => {
            console.log('‚úÖ canplay - –≥–æ—Ç–æ–≤–æ –∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é');
            updateStatus('–ì–æ—Ç–æ–≤–æ –∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é');
        });
        
        video.addEventListener('playing', () => {
            console.log('‚ñ∂Ô∏è playing');
            updateStatus('–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è ‚úì');
        });
        
        video.addEventListener('error', (e) => {
            console.error('üí• –û—à–∏–±–∫–∞ –≤–∏–¥–µ–æ!');
            checkVideo();
        });
        
        video.addEventListener('stalled', () => {
            console.warn('‚ö†Ô∏è stalled - –∑–∞–≥—Ä—É–∑–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å');
            updateStatus('–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∞—Å—å...', true);
        });
        
        video.addEventListener('suspend', () => {
            console.log('‚è∏Ô∏è suspend - –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
        });
        
        video.addEventListener('waiting', () => {
            console.log('‚è≥ waiting - –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è');
            updateStatus('–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è...');
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤
        overlay.addEventListener('click', startVideo);
        overlay.addEventListener('touchend', startVideo, { passive: false });
        
        // –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
        console.log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        console.log('üì± User Agent:', navigator.userAgent);
        
        video.load();
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            checkVideo();
            
            if (video.readyState === 0) {
                updateStatus('–í–∏–¥–µ–æ –Ω–µ –Ω–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª!', true);
                message.textContent = '–í–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ';
            }
        }, 2000);
    </script>
</body>
</html>
